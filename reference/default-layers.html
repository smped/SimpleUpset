<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Define default layers for individual UpSet components — default_set_layers • SimpleUpset</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/simplex/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Define default layers for individual UpSet components — default_set_layers"><meta property="og:description" content="Define and modify default layers for individual UpSet components"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">SimpleUpset</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Vignettes

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/introduction.html">An Introduction to SimpleUpset</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/smped/SimpleUpset" class="external-link">
    <span class="fa fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Define default layers for individual UpSet components</h1>
    <small class="dont-index">Source: <a href="https://github.com/smped/SimpleUpset/blob/gh-actions/R/defaults.R" class="external-link"><code>R/defaults.R</code></a></small>
    <div class="hidden name"><code>default-layers.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Define and modify default layers for individual UpSet components</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">default_set_layers</span><span class="op">(</span></span>
<span>  <span class="va">...</span>,</span>
<span>  fill <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  labels <span class="op">=</span> <span class="st">"size"</span>,</span>
<span>  f <span class="op">=</span> <span class="va">comma</span>,</span>
<span>  expand <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.2</span>, <span class="fl">0</span><span class="op">)</span>,</span>
<span>  hjust <span class="op">=</span> <span class="fl">1.1</span>,</span>
<span>  label_size <span class="op">=</span> <span class="fl">3.5</span>,</span>
<span>  name <span class="op">=</span> <span class="st">"Set Size"</span>,</span>
<span>  dry_run <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">default_intersect_layers</span><span class="op">(</span></span>
<span>  <span class="va">...</span>,</span>
<span>  fill <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  labels <span class="op">=</span> <span class="st">"size"</span>,</span>
<span>  f <span class="op">=</span> <span class="va">comma</span>,</span>
<span>  expand <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.05</span><span class="op">)</span>,</span>
<span>  vjust <span class="op">=</span> <span class="op">-</span><span class="fl">0.5</span>,</span>
<span>  label_size <span class="op">=</span> <span class="fl">3.5</span>,</span>
<span>  name <span class="op">=</span> <span class="st">"Intersection Size"</span>,</span>
<span>  dry_run <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">default_grid_layers</span><span class="op">(</span></span>
<span>  <span class="va">...</span>,</span>
<span>  colour <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  fill <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  light <span class="op">=</span> <span class="st">"grey80"</span>,</span>
<span>  dark <span class="op">=</span> <span class="st">"grey23"</span>,</span>
<span>  shape <span class="op">=</span> <span class="fl">19</span>,</span>
<span>  size <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  name <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  dry_run <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>additional layers to include alongside default layers.
Will be added after the default layers</p></dd>


<dt id="arg-fill">fill<a class="anchor" aria-label="anchor" href="#arg-fill"></a></dt>
<dd><p>Column to fill set bars by. Can be 'set' or another column within
the main data object</p></dd>


<dt id="arg-labels">labels<a class="anchor" aria-label="anchor" href="#arg-labels"></a></dt>
<dd><p>Choose either size or prop to label bars with totals or the
proportion of all intersections</p></dd>


<dt id="arg-f">f<a class="anchor" aria-label="anchor" href="#arg-f"></a></dt>
<dd><p>Function for labelling set or intersection sizes sizes</p></dd>


<dt id="arg-expand">expand<a class="anchor" aria-label="anchor" href="#arg-expand"></a></dt>
<dd><p>Multiplicative axis expansion passed to <code><a href="https://ggplot2.tidyverse.org/reference/expansion.html" class="external-link">ggplot2::expansion()</a></code></p></dd>


<dt id="arg-hjust-vjust">hjust, vjust<a class="anchor" aria-label="anchor" href="#arg-hjust-vjust"></a></dt>
<dd><p>Passed to respective elements for simple adjustment of
either set or intersection sizes</p></dd>


<dt id="arg-label-size">label_size<a class="anchor" aria-label="anchor" href="#arg-label-size"></a></dt>
<dd><p>Passed to labels for sets and intersections</p></dd>


<dt id="arg-name">name<a class="anchor" aria-label="anchor" href="#arg-name"></a></dt>
<dd><p>Main axis title</p></dd>


<dt id="arg-dry-run">dry_run<a class="anchor" aria-label="anchor" href="#arg-dry-run"></a></dt>
<dd><p>Set as TRUE to view the unevaluated layers which are defined
as the defaults. Additional layers passed through the ellipsis will not be
included as part of a dry_run</p></dd>


<dt id="arg-colour">colour<a class="anchor" aria-label="anchor" href="#arg-colour"></a></dt>
<dd><p>Primarily used for highlighting points and segments in the
intersections matrix</p></dd>


<dt id="arg-light-dark">light, dark<a class="anchor" aria-label="anchor" href="#arg-light-dark"></a></dt>
<dd><p>default colours for empty intersections (light) and for
both non-empty intersections and segments (dark)</p></dd>


<dt id="arg-shape-size">shape, size<a class="anchor" aria-label="anchor" href="#arg-shape-size"></a></dt>
<dd><p>Point shape/size passed to the intersections matrix</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>List of ggplot2 elements</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>These functions define the default layers for inclusion on UpSet plots.</p>
<p>The returned object is a list with a series of layers, scales, themes etc
which represent the default plotting layers for each of the sets,
intersections and intersections matrix (grid) panels.</p>
<p>A series of common arguments have been defined to enable common modifications
without recreating the list from scratch. These include modifying the mapping
to fill, axis expansion to better accommodate labels, labelling functions for
set/intersection sizes, and axis titles.</p>
<p>Additional layers, such as scale_fill_* elements, guides or themes, can be
simply included by passing to the function, without any requirement for
naming, and are handled by the ellipsis.</p>
<p>The entire command used to create default layers can be shown by calling each
function using the argument <code>dry_run = TRUE</code>.
This can be helpful for creating custom layers, by starting with then
modifying the defaults.</p>
<p>The returned object is a simple list, and are easily modifiable using
simple list operations.
Each list of default layers is described clearly below.
If passing additional scales, themes, layers or guides using the ellipsis,
these additional elements will automatically be placed after the defaults.
Importantly, these will be created as lists, then can be re-ordered using
standard list manipulation.</p><div class="section">
<h3 id="default-layers-for-sets">Default Layers For Sets<a class="anchor" aria-label="anchor" href="#default-layers-for-sets"></a></h3>
<table class="table table"><tr><td><strong>ggplot2 element</strong></td><td><strong>Comment</strong></td></tr><tr><td><code>aes(y = set)</code></td><td>Sets are placed on the y-axis</td></tr><tr><td><code>geom_bar(bar_aes)</code></td><td>If <code>fill = NULL</code>, <code>bar_aes</code> is the call to <code>aes()</code> otherwise it is <code>aes(fill = !!sym(fill))</code>. This object is created internally by <code>default_set_layers()</code></td></tr><tr><td><code>geom_text(aes(x = size, label = f(size)), hjust = hjust, size = label_size)</code></td><td>Adds set totals using the labelling function provided as <code>f</code>. A data.frame is created when calling <code>simpleUpSet</code> which summarises set totals as the column <code>size</code></td></tr><tr><td><code>scale_x_reverse(expand = c(expand, 0, 0, 0), name = name, labels = f)</code></td><td>Ensures bars go in reverse order along the x-axis, with the expansion providing room for set totals</td></tr><tr><td><code>scale_y_discrete(position = "right", name = NULL, labels = NULL)</code></td><td>Tidies up the y-axis with set names</td></tr><tr><td><code>theme(axis.text.y.right = element_text(hjust = 0.5), axis.ticks.y.right = element_blank(), margins = margin(5.5, 0, 5.5, 5.5))</code></td><td>Ensures margins and tick marks are suitable for the UpSet layout</td></tr></table></div>

<div class="section">
<h3 id="default-layers-for-intersections">Default Layers For Intersections<a class="anchor" aria-label="anchor" href="#default-layers-for-intersections"></a></h3>
<table class="table table"><tr><td><strong>ggplot2 element</strong></td><td><strong>Comment</strong></td></tr><tr><td><code>aes(x = intersect)</code></td><td>Intersections are placed along the x-axis</td></tr><tr><td><code>geom_bar(bar_aes)</code></td><td>If <code>fill = NULL</code>, <code>bar_aes</code> is the call to <code>aes()</code> otherwise it is <code>aes(fill = !!sym(fill))</code>. This object is created internally by <code>default_intersect_layers()</code></td></tr><tr><td><code>geom_text(aes(y = size, label = f(size)), vjust = vjust, size = label_size)</code></td><td>Adds intersection totals using the labelling function provided as <code>f</code>. A data.frame is created when calling <code>simpleUpSet</code> which summarises intersection totals as the column <code>size</code></td></tr><tr><td><code>scale_x_discrete(name = NULL, labels = NULL)</code></td><td>Tidies up the x-axis, hiding intersection names</td></tr><tr><td><code>scale_y_continuous(name = name, expand = c(0, 0, expand, 0), labels = f)</code></td><td>Standard y-axis with name provided and with the expansion able to be easily set to accommodate labels</td></tr><tr><td><code>theme(axis.ticks.x.bottom = element_blank(), margins = margin(5.5, 5.5, 0, 0))</code></td><td>Ensures margins and tick marks are suitable for the UpSet layout</td></tr></table></div>

<div class="section">
<h3 id="default-layers-for-intersections-matrix-i-e-grid-">Default Layers For Intersections Matrix (i.e. Grid)<a class="anchor" aria-label="anchor" href="#default-layers-for-intersections-matrix-i-e-grid-"></a></h3>
<table class="table table"><tr><td><strong>ggplot2 element</strong></td><td><strong>Comment</strong></td></tr><tr><td><code>aes(x = intersect, y = set)</code></td><td>Defines the grid layout to match the sets and intersections panels</td></tr><tr><td><code>if (!is.null(colour)) geom_point(mapping = points_aes, size = size, shape = shape) else geom_point(mapping = points_aes, size = size, shape = shape, colour = dark)</code></td><td>These points represent the main intersections. In general, colour/fill will only be required if highlighting points and the constant value is removed using an <code>ifelse</code> statement is colour is set as a mapping aesthetic</td></tr><tr><td><code>geom_point(size = size, shape = shape, colour = light)</code></td><td>These points represent the background or empty intersections</td></tr><tr><td><code>if (!is.null(colour)) geom_segment(segment_aes) else geom_segment(segment_aes, colour = dark)</code></td><td>The segments joining intersections, again removing colour if set as an aesthetic mapping</td></tr><tr><td><code>scale_y_discrete(name = NULL)</code></td><td>Ensures the y-axis matches that of the sets panel</td></tr><tr><td><code>scale_x_discrete(name = name, labels = NULL)</code></td><td>Ensures the x-axis matches that of the intersection panel, with an optional name</td></tr><tr><td><code>guides(colour = guide_none())</code></td><td>By default, don't include a legend for any optionally coloured points</td></tr><tr><td><code>theme(margins = margin(5.5, 5.5, 5.5, 0), axis.text.y = element_text(hjust = 0.5), axis.ticks = element_blank())</code></td><td>Ensures margins, text and tick marks are suitable for the UpSet layout</td></tr></table></div>

<div class="section">
<h3 id="panel-internals">Panel Internals<a class="anchor" aria-label="anchor" href="#panel-internals"></a></h3>


<p>Internally, the supplied data.frame has the additional columns 'intersect',
'degree' added, along with the optional 'highlight' column.
This object is used to directly create bars using <code>geom_bar()</code> and as such,
any of the additional columns can be passed to <code>geom_bar()</code> as mapping
aesthetics, along with all original columns.</p>
<p>For both the sets and intersection totals (i.e. labels), separate tables are
created specifically for printing totals at the top (or left) of each bar,
and these tables are specifically passed to those layers.
Totals are included as 'size' and the proportion of all intersections is
also included as the column 'prop' for both the sets and intersections panel.
Whilst default labels are added using 'size', changing this to 'prop' and
using <code><a href="https://scales.r-lib.org/reference/percent_format.html" class="external-link">scales::percent()</a></code> will work and is supported.</p>
</div>

    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># View the un-evaluated list of default layers for the sets</span></span></span>
<span class="r-in"><span><span class="fu">default_set_layers</span><span class="op">(</span>dry_run <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> list(aes(y = set), geom_bar(aes(fill = ~NULL)), geom_text(aes(x = size, </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     label = f(size)), hjust = hjust, size = label_size), scale_x_reverse(expand = expansion(expand), </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     name = name, labels = comma), scale_y_discrete(position = "right", </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     name = NULL, labels = NULL), theme(axis.text.y.right = element_text(hjust = 0.5), </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     axis.ticks.y.right = element_blank(), margins = margin(5.5, </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         0, 5.5, 5.5)))</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create set layers colouring by set name, and hiding the legend</span></span></span>
<span class="r-in"><span><span class="va">set_list</span> <span class="op">&lt;-</span> <span class="fu">default_set_layers</span><span class="op">(</span></span></span>
<span class="r-in"><span>  fill <span class="op">=</span> <span class="st">"set"</span>, <span class="fu">scale_fill_brewer</span><span class="op">(</span>palette <span class="op">=</span> <span class="st">"Set1"</span><span class="op">)</span>, <span class="fu">guides</span><span class="op">(</span>fill <span class="op">=</span> <span class="fu">guide_none</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">set_list</span>, <span class="va">is</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "ggplot2::mapping"        "LayerInstance"          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3] "LayerInstance"           "ScaleContinuousPosition"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [5] "ScaleDiscretePosition"   "theme"                  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [7] "ScaleDiscrete"           "Guides"                 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by <a href="https://github.com/smped" class="external-link">Stevie Pederson</a>.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

      </footer></div>






  </body></html>

